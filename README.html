<!DOCTYPE html><html><head><meta charset="utf-8"><style>body {
  width: 45em;
  border: 1px solid #ddd;
  outline: 1300px solid #fff;
  margin: 16px auto;
}

body .markdown-body
{
  padding: 30px;
}

@font-face {
  font-family: fontawesome-mini;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

@font-face {
  font-family: octicons-anchor;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

.markdown-body {
  font-family: sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #333333;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  word-wrap: break-word;
}

.markdown-body a {
  background: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline: 0;
}

.markdown-body b,
.markdown-body strong {
  font-weight: bold;
}

.markdown-body mark {
  background: #ff0;
  color: #000;
  font-style: italic;
  font-weight: bold;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
.markdown-body sup {
  top: -0.5em;
}
.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

.markdown-body img {
  border: 0;
}

.markdown-body hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

.markdown-body pre {
  overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

.markdown-body input {
  color: inherit;
  font: inherit;
  margin: 0;
}

.markdown-body html input[disabled] {
  cursor: default;
}

.markdown-body input {
  line-height: normal;
}

.markdown-body input[type="checkbox"] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body .codehilitetable {
  border: 0;
  border-spacing: 0;
}

.markdown-body .codehilitetable tr {
  border: 0;
}

.markdown-body .codehilitetable pre,
.markdown-body .codehilitetable div.codehilite {
  margin: 0;
}

.markdown-body .linenos,
.markdown-body .code,
.markdown-body .codehilitetable td {
  border: 0;
  padding: 0;
}

.markdown-body td:not(.linenos) .linenodiv {
  padding: 0 !important;
}

.markdown-body .code {
  width: 100%;
}

.markdown-body .linenos div pre,
.markdown-body .linenodiv pre,
.markdown-body .linenodiv {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-left-radius: 3px;
  -webkit-border-bottom-left-radius: 3px;
  -moz-border-radius-topleft: 3px;
  -moz-border-radius-bottomleft: 3px;
  border-top-left-radius: 3px;
  border-bottom-left-radius: 3px;
}

.markdown-body .code div pre,
.markdown-body .code div {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 3px;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 3px;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 3px;
}

.markdown-body * {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body input {
  font: 13px Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
  line-height: 1.4;
}

.markdown-body a {
  color: #4183c4;
  text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:focus,
.markdown-body a:active {
  text-decoration: underline;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #ddd;
}

.markdown-body hr:before,
.markdown-body hr:after {
  display: table;
  content: " ";
}

.markdown-body hr:after {
  clear: both;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 15px;
  margin-bottom: 15px;
  line-height: 1.1;
}

.markdown-body h1 {
  font-size: 30px;
}

.markdown-body h2 {
  font-size: 21px;
}

.markdown-body h3 {
  font-size: 16px;
}

.markdown-body h4 {
  font-size: 14px;
}

.markdown-body h5 {
  font-size: 12px;
}

.markdown-body h6 {
  font-size: 11px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ul,
.markdown-body ol {
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre,
.markdown-body samp {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body kbd {
  background-color: #e7e7e7;
  background-image: -moz-linear-gradient(#fefefe, #e7e7e7);
  background-image: -webkit-linear-gradient(#fefefe, #e7e7e7);
  background-image: linear-gradient(#fefefe, #e7e7e7);
  background-repeat: repeat-x;
  border-radius: 2px;
  border: 1px solid #cfcfcf;
  color: #000;
  padding: 3px 5px;
  line-height: 10px;
  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  display: inline-block;
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body .headeranchor-link {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  display: block;
  padding-right: 6px;
  padding-left: 30px;
  margin-left: -30px;
}

.markdown-body .headeranchor-link:focus {
  outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  position: relative;
  margin-top: 1em;
  margin-bottom: 16px;
  font-weight: bold;
  line-height: 1.4;
}

.markdown-body h1 .headeranchor,
.markdown-body h2 .headeranchor,
.markdown-body h3 .headeranchor,
.markdown-body h4 .headeranchor,
.markdown-body h5 .headeranchor,
.markdown-body h6 .headeranchor {
  display: none;
  color: #000;
  vertical-align: middle;
}

.markdown-body h1:hover .headeranchor-link,
.markdown-body h2:hover .headeranchor-link,
.markdown-body h3:hover .headeranchor-link,
.markdown-body h4:hover .headeranchor-link,
.markdown-body h5:hover .headeranchor-link,
.markdown-body h6:hover .headeranchor-link {
  height: 1em;
  padding-left: 8px;
  margin-left: -30px;
  line-height: 1;
  text-decoration: none;
}

.markdown-body h1:hover .headeranchor-link .headeranchor,
.markdown-body h2:hover .headeranchor-link .headeranchor,
.markdown-body h3:hover .headeranchor-link .headeranchor,
.markdown-body h4:hover .headeranchor-link .headeranchor,
.markdown-body h5:hover .headeranchor-link .headeranchor,
.markdown-body h6:hover .headeranchor-link .headeranchor {
  display: inline-block;
}

.markdown-body h1 {
  padding-bottom: 0.3em;
  font-size: 2.25em;
  line-height: 1.2;
  border-bottom: 1px solid #eee;
}

.markdown-body h2 {
  padding-bottom: 0.3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

.markdown-body h3 {
  font-size: 1.5em;
  line-height: 1.43;
}

.markdown-body h4 {
  font-size: 1.25em;
}

.markdown-body h5 {
  font-size: 1em;
}

.markdown-body h6 {
  font-size: 1em;
  color: #777;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body .admonition {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: 4px;
  padding: 0;
  margin: 16px 0;
  background-color: #e7e7e7;
  border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body blockquote {
  padding: 0 15px;
  color: #777;
  border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}

.markdown-body table th {
  font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #ddd;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

.markdown-body img {
  max-width: 100%;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body code,
.markdown-body samp {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .codehilite {
  margin-bottom: 16px;
}

.markdown-body .codehilite pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border-radius: 3px;
}

.markdown-body .codehilite pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
  content: normal;
}

/* Admonition */
.markdown-body .admonition {
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  position: relative;
  border-radius: 3px;
  border: 1px solid #e0e0e0;
  border-left: 6px solid #333;
  padding: 10px 10px 10px 30px;
}

.markdown-body .admonition table {
  color: #333;
}

.markdown-body .admonition p {
  padding: 0;
}

.markdown-body .admonition-title {
  font-weight: bold;
  margin: 0;
}

.markdown-body .admonition>.admonition-title {
  color: #333;
}

.markdown-body .attention>.admonition-title {
  color: #a6d796;
}

.markdown-body .caution>.admonition-title {
  color: #d7a796;
}

.markdown-body .hint>.admonition-title {
  color: #96c6d7;
}

.markdown-body .danger>.admonition-title {
  color: #c25f77;
}

.markdown-body .question>.admonition-title {
  color: #96a6d7;
}

.markdown-body .note>.admonition-title {
  color: #d7c896;
}

.markdown-body .admonition:before,
.markdown-body .attention:before,
.markdown-body .caution:before,
.markdown-body .hint:before,
.markdown-body .danger:before,
.markdown-body .question:before,
.markdown-body .note:before {
  font: normal normal 16px fontawesome-mini;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  line-height: 1.5;
  color: #333;
  position: absolute;
  left: 0;
  top: 0;
  padding-top: 10px;
  padding-left: 10px;
}

.markdown-body .admonition:before {
  content: "\f056\00a0";
  color: 333;
}

.markdown-body .attention:before {
  content: "\f058\00a0";
  color: #a6d796;
}

.markdown-body .caution:before {
  content: "\f06a\00a0";
  color: #d7a796;
}

.markdown-body .hint:before {
  content: "\f05a\00a0";
  color: #96c6d7;
}

.markdown-body .danger:before {
  content: "\f057\00a0";
  color: #c25f77;
}

.markdown-body .question:before {
  content: "\f059\00a0";
  color: #96a6d7;
}

.markdown-body .note:before {
  content: "\f040\00a0";
  color: #d7c896;
}

.markdown-body .admonition::after {
  content: normal;
}

.markdown-body .attention {
  border-left: 6px solid #a6d796;
}

.markdown-body .caution {
  border-left: 6px solid #d7a796;
}

.markdown-body .hint {
  border-left: 6px solid #96c6d7;
}

.markdown-body .danger {
  border-left: 6px solid #c25f77;
}

.markdown-body .question {
  border-left: 6px solid #96a6d7;
}

.markdown-body .note {
  border-left: 6px solid #d7c896;
}

.markdown-body .admonition>*:first-child {
  margin-top: 0 !important;
}

.markdown-body .admonition>*:last-child {
  margin-bottom: 0 !important;
}

/* progress bar*/
.markdown-body .progress {
  display: block;
  width: 300px;
  margin: 10px 0;
  height: 24px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #ededed;
  position: relative;
  box-shadow: inset -1px 1px 3px rgba(0, 0, 0, .1);
}

.markdown-body .progress-label {
  position: absolute;
  text-align: center;
  font-weight: bold;
  width: 100%; margin: 0;
  line-height: 24px;
  color: #333;
  text-shadow: 1px 1px 0 #fefefe, -1px -1px 0 #fefefe, -1px 1px 0 #fefefe, 1px -1px 0 #fefefe, 0 1px 0 #fefefe, 0 -1px 0 #fefefe, 1px 0 0 #fefefe, -1px 0 0 #fefefe, 1px 1px 2px #000;
  -webkit-font-smoothing: antialiased !important;
  white-space: nowrap;
  overflow: hidden;
}

.markdown-body .progress-bar {
  height: 24px;
  float: left;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #96c6d7;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .5), inset 0 -1px 0 rgba(0, 0, 0, .1);
  background-size: 30px 30px;
  background-image: -webkit-linear-gradient(
    135deg, rgba(255, 255, 255, .4) 27%,
    transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%,
    transparent 77%, transparent
  );
  background-image: -moz-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -ms-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -o-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
}

.markdown-body .progress-100plus .progress-bar {
  background-color: #a6d796;
}

.markdown-body .progress-80plus .progress-bar {
  background-color: #c6d796;
}

.markdown-body .progress-60plus .progress-bar {
  background-color: #d7c896;
}

.markdown-body .progress-40plus .progress-bar {
  background-color: #d7a796;
}

.markdown-body .progress-20plus .progress-bar {
  background-color: #d796a6;
}

.markdown-body .progress-0plus .progress-bar {
  background-color: #c25f77;
}

.markdown-body .candystripe-animate .progress-bar{
  -webkit-animation: animate-stripes 3s linear infinite;
  -moz-animation: animate-stripes 3s linear infinite;
  animation: animate-stripes 3s linear infinite;
}

@-webkit-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@-moz-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

.markdown-body .gloss .progress-bar {
  box-shadow:
    inset 0 4px 12px rgba(255, 255, 255, .7),
    inset 0 -12px 0 rgba(0, 0, 0, .05);
}

/* Multimarkdown Critic Blocks */
.markdown-body .critic_mark {
  background: #ff0;
}

.markdown-body .critic_delete {
  color: #c82829;
  text-decoration: line-through;
}

.markdown-body .critic_insert {
  color: #718c00 ;
  text-decoration: underline;
}

.markdown-body .critic_comment {
  color: #8e908c;
  font-style: italic;
}

.markdown-body .headeranchor {
  font: normal normal 16px octicons-anchor;
  line-height: 1;
  display: inline-block;
  text-decoration: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.headeranchor:before {
  content: '\f05c';
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 4px 0.25em -20px;
  vertical-align: middle;
}

/* Media */
@media only screen and (min-width: 480px) {
  .markdown-body {
    font-size:14px;
  }
}

@media only screen and (min-width: 768px) {
  .markdown-body {
    font-size:16px;
  }
}

@media print {
  .markdown-body * {
    background: transparent !important;
    color: black !important;
    filter:none !important;
    -ms-filter: none !important;
  }

  .markdown-body {
    font-size:12pt;
    max-width:100%;
    outline:none;
    border: 0;
  }

  .markdown-body a,
  .markdown-body a:visited {
    text-decoration: underline;
  }

  .markdown-body .headeranchor-link {
    display: none;
  }

  .markdown-body a[href]:after {
    content: " (" attr(href) ")";
  }

  .markdown-body abbr[title]:after {
    content: " (" attr(title) ")";
  }

  .markdown-body .ir a:after,
  .markdown-body a[href^="javascript:"]:after,
  .markdown-body a[href^="#"]:after {
    content: "";
  }

  .markdown-body pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .markdown-body pre,
  .markdown-body blockquote {
    border: 1px solid #999;
    padding-right: 1em;
    page-break-inside: avoid;
  }

  .markdown-body .progress,
  .markdown-body .progress-bar {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .markdown-body .progress {
    border: 1px solid #ddd;
  }

  .markdown-body .progress-bar {
    height: 22px;
    border-right: 1px solid #ddd;
  }

  .markdown-body tr,
  .markdown-body img {
    page-break-inside: avoid;
  }

  .markdown-body img {
    max-width: 100% !important;
  }

  .markdown-body p,
  .markdown-body h2,
  .markdown-body h3 {
    orphans: 3;
    widows: 3;
  }

  .markdown-body h2,
  .markdown-body h3 {
    page-break-after: avoid;
  }
}
</style><title>README</title></head><body><article class="markdown-body"><p>Louis Ditzel ld13280, James Hughes jh13293 </p>
<p>We would like this project to be marked as ongoing work on both the client and server.   </p>
<h1 id="festerr"><a name="user-content-festerr" href="#festerr" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Festerr</h1>
<p>Festerr is a music festival discovery platform that combines data from multiple 3rd party APIs (Skiddle and Spotify) to provide users with a personalised event calendar.  </p>
<p>An event is ranked by our Festerr score: the number of artists playing at the event that are also in the user&rsquo;s Spotify library. The more artists, the higher the rank.</p>
<p>Users are also able to search for upcoming events and artists that they are interested in. </p>
<p>The site is live on <a href="https://festerr.herokuapp.com">https://festerr.herokuapp.com</a> </p>
<h1 id="technologies"><a name="user-content-technologies" href="#technologies" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Technologies</h1>
<h2 id="stack"><a name="user-content-stack" href="#stack" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Stack</h2>
<h3 id="backend"><a name="user-content-backend" href="#backend" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Backend</h3>
<ul>
<li>
<p>Fester uses a NodeJS server to serve the html/css/js files to the client. The <a href="http://expressjs.com/">ExpressJS</a> framework is used for route handling, serving the user the main app when they go to the base url. Other endpoints are used to provide a REST API service for the client to access data. For example, the <code>/spotify/artists/</code> endpoint provides the client with all of a user&rsquo;s Spotify artists.   </p>
</li>
<li>
<p>The app gathers the necessary data by hitting endpoints defined in the server using AJAX requests. The client and server are designed to be stateless, to follow REST guidelines, and use access tokens in the HTTP headers to authorize user sessions. </p>
</li>
<li>
<p>We use <a href="https://www.sqlite.org/whentouse.html">Sqlite3</a> as our database engine. We choose this over MySQL and PostgreSQL because it was the most simple and effective solution to our needs while also offering excellent performance (Sqlite3 is recommended for sites with over 100,000 hits a day). We do not need to store huge amounts of data as our database acts as a cache, and for each page we need only 2-3 SQL queries at most. Sqlite3 also required much less overhead in terms of setup and configuration, and as it offers far fewer features than than a traditional RDBMS (none of which we need for our app) is a much lighter system, and allows our site to be more responsive to user interaction with the DB when compared to a &lsquo;heavier&rsquo; database solution.</p>
</li>
<li>
<p>To interact with Sqlite3 we could use raw SQL queries, but we decided that this would be cumbersome, error prone and less secure (through SQL injection attacks). We therefore choose to use an Object-Relational Mapping solution, which provides an API on top of a database that allows us to use a &lsquo;virtual object database&rsquo; in our Javascript code to manage to underlying data. We choose to use <a href="http://docs.sequelizejs.com/en/latest/">Sequelize</a> as it is a promise-based ORM for Node.js which supports using SQlite and features transaction support, relations and more. (See more in the technical challenges section). </p>
</li>
</ul>
<h3 id="frontend"><a name="user-content-frontend" href="#frontend" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Frontend</h3>
<ul>
<li>
<p><a href="https://angularjs.org/">AngularJS</a> is a popular frontend framework developed by Google, which we have used to aide in the creation of our Single Page App (SPA). Angular provides an implementation of the Model, View, Controller (MVC) pattern. A declarative user interface allows two-way bindings to be added to HTML templates, allowing data on the page to be updated in real time when background models are changed. The app is built with reusable components (services, directives, factories) which are injected into the required views. This allows the separation of display &amp; render logic (such as DOM manipulations) from the main logic (network requests, behind-the-scenes logic), which promotes DRY code, more so than with standard JavaScript. Finally, Angular comes with a powerful testing framework, Protractor, that provides unit and integration testing for the entire front end. </p>
</li>
<li>
<p>We use vanilla CSS3 to provide styling to components. However, Angular also allows styles and classes to be applied dynamically, which results in some inline CSS on some components.   </p>
</li>
<li>
<p>Festerr has a unique logo and favicon, created using GIMP and saved as .png, .ico and .svg files. Button icons also use the .svg format to allow for adaptive rescaling.   </p>
</li>
<li>
<p><a href="https://material.angularjs.org/latest/">Angular Material</a> is a CSS library that provides pre-built HTML components that are a &lsquo;reference implementation of Google&rsquo;s Material Design Specification.&rsquo; These components are reusable and tested, and also integrate well with the AngularJS framework we are already using.  </p>
</li>
</ul>
<h2 id="apis"><a name="user-content-apis" href="#apis" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>APIs</h2>
<ul>
<li>
<p><strong>Skiddle</strong>. All event info is gathered from <a href="http://www.skiddle.com">Skiddle</a>, a festival and event finder website. We use the <a href="http://www.skiddle.com/api/">API</a> to access data about events happening in the UK. Other event APIs exist, such as SongKick, however Skiddle proved the least restrictive: allowing us to search for any events in a given time frame. Skiddle also provides basic artist data, which we cross-reference with Spotify data to provide a tailored front page for every user. </p>
</li>
<li>
<p><strong>Spotify</strong>. <a href="https://www.spotify.com/uk/">Spotify</a> is one of the largest music streaming services in the UK, offering both free and premium tiers. People interested in festivals and music events are likely to have Spotify accounts containing self-curated playlists full of their favorite music. Spotify provides an <a href="https://developer.spotify.com/web-api/">API</a> to access this data allowing us to enrich our platform by personalising it to a user&rsquo;s music taste. </p>
</li>
<li>
<p><strong>Google Search API</strong>. To provide extra context for an event, large header images are used on the event details page. These images are retrieved using the Google Search API as it allows the site to adapt to the addition of new events without the manual inclusion of related imagery. In order to ensure the return of accurate and relevant results, extra search terms are added along with the event in question, as well as setting filetype and size flags.  Google has a restriction on it&rsquo;s API that prevents it from being called more than 100 times in any given day. This throttling proved to be somewhat limiting during development as originally the search would be performed every time the page was loaded. In order to overcome this, and similar issues plaguing other APIs, we implemented a data caching scheme, which would simply call each API once when the relevant page is first loaded on the server. This not only alleviated those problems, but reduced our reliance on the stability of these external services whilst our platform is running. </p>
</li>
</ul>
<h2 id="database-integration"><a name="user-content-database-integration" href="#database-integration" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Database Integration</h2>
<ul>
<li><strong>Database Integration and Caching</strong>. As part of our database integration for the app, we used Sqlite3 and Sequelize to implement a caching service and unique user store.<ul>
<li><strong>ORM</strong>. Using an ORM like Sequelize allows us to define tables in the database as javascript objects, and interact with that data in a more object oriented way. For example, we define a User and Event object, with names, dates, locations as one would a regular Javascript object which are actually represented as tables in the database. An instance of the model object is a row in the model table. We can also specify validation for these fields to allow for better data integrity (for example not allowing Null fields), which would be cumbersome to check and maintain in Javascript objects. </li>
<li><strong>Caching</strong>. Most of the API services we use implement some kind of rate limiting or request limit, so that someone cannot abuse their service. For example the Google Search API allows only 100 searches a day from any one app. We therefore wanted to reduce the number of calls we had to make for each user visiting the site. E.g. if two users visit the &lsquo;Creamfields 2016&rsquo; page, we do not want to request the data from Skiddle twice. To rectify this, we use Sqlite3 as read-through cache with an Events model that mirrors the fields of a Skiddle Event object. If one user requests data, we first check if it is in the cache and return that, otherwise we make the external call and cache the response before sending it back to the user. This means we only load unique data once per the lifetime of the server. Not only does this allow us to stay below of rate limits, but it also improves our page loading times, as we do not have the gather the data again from external APIs. If time allowed, we would also add a timeout to the data in the cache, so that we could periodically check that data in the cache was still valid against the actual data from the provider. However as event data is unlikely to change from day to day we did not see this as vital. </li>
<li><strong>Users</strong>. We also store unique userID&rsquo;s (the same ID that Spotify uses to identify them). We do not store any other user details, or any other tokens that could be used to access the user&rsquo;s personal data on Spotify. This gives security an anonymity to users visiting the site, who have nothing to fear even if our database was compromised by malicious attacks.</li>
</ul>
</li>
</ul>
<h2 id="challenges-faced"><a name="user-content-challenges-faced" href="#challenges-faced" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Challenges Faced</h2>
<ul>
<li>
<p><strong>Workflow</strong>. The first important hurdle to cross was the workflow implementation. When multiple people are working on a project with as many parts as this, it can be easy to lose track of what another person is doing. Both members of the team are well-versed in the use of git to manage a project and so the project was integrated into version control before any code was written. GitHub was used to host the repository and keep track of issues, pull requests and code reviews. We used another service, <a href="https://waffle.io/">Waffle.io</a> (which integrates heavily with GitHub) to organise our tasks, by separating them into &lsquo;Backlog&rsquo;, &lsquo;In Progress&rsquo;, &lsquo;In Review&rsquo; and &lsquo;Done&rsquo; lists. This eased development headaches dramatically as it clearly structured the work we had done and the work that remained to be done. </p>
</li>
<li>
<p><strong>Responsive Design</strong>. Modern websites should be designed to be viewable and usable on many different screen sizes, be they desktop, tablet or phone. This can be done by using separate desktop and mobile templates and serving the appropriate one, or using one responsive template that dynamically fits to any screen size. As mobile use of the web is growing, so too is it important for a site to be responsive.  </p>
<ul>
<li>To achieve this, we designed the site mobile first, mocking up UI ideas in GIMP (which can be seen in the <code>/dumpFiles</code> folder) until we settled on a design which worked well on both small and large screens. We split the interface into &lsquo;modules&rsquo; of separate content, which can be reordered or flowed on the screen using CSS media queries to define screen size breakpoints. The CSS property &lsquo;flex&rsquo; allows items to grow and shrink in size to fit its container. Flex also allows for the ordering, spacing and wrapping of items in space using simple properties, which provide a simple but powerful tool for building responsive designs. For example, the main festival tile grid wraps to smaller sizes, showing 4 elements per row on large screens, 2 on smaller and finally a single column on phone screens. This keeps all the functionality the same but better usability on small devices. </li>
</ul>
</li>
<li>
<p><strong>Non-blocking Design</strong>. NodeJS (and JavaScript in general) is an asyncronous language, using an event driven loop to fire callbacks to provide non-blocking functions. This allows Node to handle many concurrent requests as they do not block as they would in other languages, but register a callback and do CPU bound work only when no other work is being carried out. However, can lead to &lsquo;callback hell&rsquo;, with many nested callback functions. </p>
<ul>
<li>To prevent this, we use a relativly new feature of ECMAScript called <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise">promises</a>. These act as a proxy for a value which is not know yet, but is fulfilled later at some point by the result of an asynchronous function.</li>
<li>Promises can be chained, and the result of one promise passed to another when complete, but allowing other work to be done in the meantime. A common use of promises is for network requests, an inherently asynchronous action. By requesting a resource from the server, but immediately returning a promise, we can continue with other work, such as rendering other UI components or handling other network requests until the promise is fulfilled by the result of the original request. This is the pattern we use for all network requests in Festerr, either from Spotify, Skiddle or our own server. We also use promises when doing IO work, such as accessing databases or loading files.</li>
<li>Using promises effectively requires practice and study, but has allowed us to build a responsive and fast site, with UI events (animation/rendering) not being blocked by slow network requests.</li>
<li>Furthermore, if we cannot render elements due to waiting on a resource to load, we display loading symbols and progress bars. This is good UI design, as it provides visual feedback to the user, instead of assuming something has frozen or broken. We also plan to implement placeholder elements while content is loading, to reduce the impact of content loading and &lsquo;jumping&rsquo; around the screen.      </li>
</ul>
</li>
<li>
<p><strong>User Likes</strong>. We wanted to allow users to &lsquo;favourite&rsquo; festivals they were interested in, so they could view them later if they visit the site again. We could store this in a session, but we wanted this data to persist longer than a normal cookie (an approach normally used for shopping carts etc). </p>
<ul>
<li>To prevent this temporal limitation, we created a database record that joined Users (with a unique Spotify ID) and Events (with a unique Skiddle ID). This was a many to many relationship, as one user can like many events, and an event can be liked by many users. Hence we had a UserEvents table, with each row being a mapping of userID to event ID. When a signed in user liked an event (using the Heart on the event detail page) this was saved to the database. They can continue liking as many events as they like. They can then review all liked events in the &lsquo;favourites&rsquo; panel of the site. We visiting this page, we check if the user is authorized to view it (i.e. have a valid session cookie) and then retrieve all the events that their userID maps to in the database.  </li>
</ul>
</li>
<li>
<p><strong>HTTPS</strong>. To improve the security of the site, we serve all of our data over the HTTPS protocol, rather than unsecure HTTP. This means the user knows that all data being sent between the app and and server is encrytped and secure, and that no 3rd party is injected malicious data, or able to view what is being sent.</p>
<ul>
<li>In order to allow HTTPS, we required an SSL certificate. This we generated and self-signed using the openssl library using up to date encryption standards. However as our certificate is self-signed, some browsers (such as chrome) warn the user before allowing them to visit it, as this is often a sign that the site in question is suspicious. Without buying a certificate we are unable to rectify this issue. Furthermore, running the site locally with the certificates installed on the system allows for HTTPS. We have added a graceful fallback to HTTP if the required certificates are not found when the server is started.      </li>
</ul>
</li>
<li>
<p><strong>Modular Components</strong>. While developing non-trival app in JS, we deemed it important build components as &lsquo;mini-services&rsquo;, stand alone modules that serve a single, clearly defined purpose. By then combining these small modules we could then build larger functional components. AngularJS promotes this design pattern through dependency injection. Modules can be composed of directive or services which contain the main logic, which are then injected into angular controllers, providing an &lsquo;inversion of control&rsquo;. </p>
<ul>
<li>An example of this is our SpotifyService module. This service handles managing the user&rsquo;s Spotify session, for example refreshing access tokens or getting a user&rsquo;s artists. We then inject this into the FestivalList controller, which uses this module to retrieve and display Spotify information in response to user input. </li>
</ul>
</li>
<li>
<p><strong>Festival and Event Search</strong>. The search bar at the top of the site has been a major area of development during this first phase. Initially an input field that would filter the event list based on name alone, the search box was not complex. However we quickly realized that it would need to be a lot smarter in order to be of any real use.  </p>
<ul>
<li>Using <a href="https://www.google.com/design/spec/components/chips.html">&lsquo;Chips&rsquo;</a>, we were able to come up with a system that was both smart and robust. When a user starts typing, a list of possible matches to their query appears beneath the searchbox as possible suggestions. When the one they want is found, they can select it and then start a new search, chaining the searches together to narrow down their selection.  </li>
<li>Several issues were encountered during this. First was the time it took to calculate the autocomplete suggestions meant that the user could experience some stutter whilst typing, as the client was attempting to do too much at once. By adding a check to pause the search (while showing a loading icon) if the user was typing over a certain speed, this stuttering was reduced. By then making the search asynchronous, the stuttering was eliminated completely. The second issue was one of ordering. The order that autocomplete results were being shown were simply the order they had been placed into the event &amp; artist arrays. </li>
<li>We wanted this to be smarter and show the most likely suggestion at the top. <a href="https://en.wikipedia.org/wiki/Levenshtein_distance">Levenshtein Distance</a> allowed us to do exactly that. By computing the distance between all event and artist names and the current search query, we were able to sort the list from smallest to largest, giving a much tighter ordering. </li>
</ul>
</li>
<li>
<p><strong>Access Tokens</strong>. When using external APIs, many often require the use of some access token retreived beforehand when a developer registers with the API provider. As these are personal to the developer and should not be shared it was essential to store them privately. This had two consequences. </p>
<ul>
<li>Firstly, the keys would have to remain on the server, and as such all API calls would have to be called from there. As we already had a robust routing framework in place, we implemented this effectively by having specific server endpoints calling specific external APIs. </li>
<li>Secondly, the necessary keys would have to be kept out of version control, so as to keep them safe from security breaches in the hosted git repository. This meant creating an untracked JSON file containing the keys, and maintaining it manually on both team members local repositories.</li>
<li>All keys (and other private info) are set as environment variables at run time. This means the keys are never stored in code, and has the benefit of allowing different configurations of the server by setting or changing environment variables. This important as we have need different API codes for local development and for deployment in the wild (on Heroku).  </li>
</ul>
</li>
<li>
<p><strong>Sessions</strong>. Although we store the Spotify tokens in the user&rsquo;s cookies, it would be possible for someone to spoof those tokens to make a request for the user&rsquo;s data from the server. In order to prevent this, we implement user sessions along with the tokens, which are used to authurize a user&rsquo;s session with our own server (the Spotify tokens authorize access to Spotify data only). </p>
<ul>
<li>The sessions are encrypted and sent in the header when a user signs into the app. All further HTTP requests made by the app must include the session in the header, which is verified then by the server before sending a response back.</li>
<li>Rather than implementing our own session service (which is not recommended due to security issues) we used the popular <a href="https://github.com/mozilla/node-client-sessions">Client Sessions</a> library made by Mozilla which is we use as middle-wear in our express app for all routes requiring user authentication (such as retrieving user favourites). This uses the industry standard encryption algorithms (SHA and AES).  </li>
</ul>
</li>
<li>
<p><strong>Spotify OAuth2 Flow</strong>. Some requests to the Spotify API, for example user&rsquo;s private data like their name or saved tracks, require the user to have granted permission for the app to access it. To prove the user has given permission, request headers to the resource must include a valid access token.</p>
<ul>
<li>Spotify provides different &lsquo;flows&rsquo; for authorization, and we decided to use the <a href="https://developer.spotify.com/web-api/authorization-guide/#authorization_code_flow">Authorisation Code</a> flow for Festerr. This flow provides a refresh token, to extend the validity of access tokens (which expire after a given time). The is suitable for us as the user need only log in once, and not on every visit to the site.</li>
<li>The OAuth2 flow consists of serval steps, detailed in the link above. This was a new challenge for us, and has been a significant feature to add as it required conforming to a rigorous 3rd party specification of several API calls. To improve security, we also generate unique states and codes to correlate requests and responses and ensure they come from our server. </li>
<li>Additionally we to encode the hash of some client state (like the cookie) in this state variable, validating the response to additionally ensure that the request and response originated in the same browser. This provides protection against attacks such as cross-site request forgery.</li>
<li>Getting the access token from Spotify&rsquo;s OAuth2 service allows use to access playlist and track data from a user&rsquo;s Spotify playlist. This token however is only valid for a certain amount of time (60 minutes). We therefore store the expiry date in the site&rsquo;s cookies, and when they expire automatically request a new access token for the user. We must also check the token is valid when the user first navigates to the page. This is done using Angular&rsquo;s module system, which provides a config function for modules before they are injected into other components.  </li>
</ul>
</li>
<li>
<p><strong>Access Tokens</strong>. When using external APIs, many often require the use of some access token retrieved beforehand when a developer registers with the API provider. As these are personal to the developer and should not be shared it was essential to store them privately. This had two consequences: first, the keys would have to remain on the server, and as such all API calls would have to be called from there. As we already had a robust routing framework in place, we implemented this effectively by having specific server endpoints calling specific external APIs. Secondly, the necessary keys would have to be kept out of version control, so as to keep them safe from security breaches in the hosted git repository. This meant creating an untracked JSON file containing the keys, and maintaining it manually on both team members local repositories.  </p>
</li>
<li>
<p><strong>Heroku</strong>. Festerr is deployed onto a Heroku free dyno. The deployment is linked to the Festerr GitHub repository, each commit to the master branch triggers the Heroko app to fetch and delpoy the master app, using the commands defined in the Procfile. As we currently have no pre-deployment steps, this is simply <code>node server.js</code>. </p>
<ul>
<li>Heroku supports setting configuration environment variables, which we use to change API endpoints between local and production environments. For example, the spotify API callback for getting access tokens must be set to a domain, which is localhost for testing, and herokuapps in production. </li>
<li>Our app uses many external API&rsquo;s, which require some kind of authentication before using them. This is in the form of keys or tokens which are sent with requests. However we cannot store this cookies in our version control, as they would be included publicly on our Github repository and is considered bad practice. Therefore we store all sensitive configuration information as environment variables in the shell of the running server. These variables can be set at runtime or stored by an external program. Heroku allows us to save environment variables when setting up the app. This means even if someone gained access to Festerr&rsquo;s files, they would still not get access to the sensitive information.  </li>
</ul>
</li>
<li>
<p><strong>XHTML</strong>. As part of the specification for this coursework, we ensured our site returned files consistent with the XHTML standard. To to this, we had to convert Angular data-bindings and ensure we included what doctype to render the page as. </p>
<ul>
<li>To ensure we met the specification we used the <a href="https://validator.w3.org/">W3C Markup Validation Service</a> to check our page. This flagged up errors in our site, such as missing closing tags, invalid tag attributes (such as Angular directives) and others. We deemed the site XHTML valid when the validator reported no errors.</li>
</ul>
</li>
<li>
<p><strong>SVG ANIAMTIONS</strong>. After designing the logo in GIMP, it was exported as an SVG file, so it would both render crisply across all screen dimensions, and was easily animatable. SVGs allow for embedded CSS, and as such, it was possible to animate the logo for different purposes. Two copies were made, one with a white circular background, to appear in the header bar which animates on mouseover; and another (with no background) which animates at all times to be used as a loading icon. The SVG animations were added manually to the files exported from Gimp, but not until they had been tidied-up. To make them human-readable, and easier to work with, each section of the logo was given a distinct class, which could then be accessed easier in the CSS.</p>
</li>
<li>
<p><strong>IMAGE COLOR PALETTE EXTRACTION</strong>. To enhance the aesthetic of the website, and allow certain important elements to really catch the user&rsquo;s eye, we dynamically change their colour based on the vibrant colour of a header image. On the event detail page, both the circular favouriting button and the &ldquo;Buy Tickets&rdquo; button take on the colour of the large header image behind them. This not only draws attention to them, but provides some thematic consistency across the page. The effect was achieved using the <a href="http://jariz.github.io/vibrant.js/">Vibrant.js</a> library, a Javascript port of the palette framework found in the Android OS. The library allows you to extract prominent colours from an image, of which we take the most vibrant, and style the necessary elements in the page to match, before they are made visible to the user.</p>
</li>
<li>
<p><strong>Cross Browser Compatibility</strong>. To ensure cross browser compatibility we regularly tested the site on a range of browsers using several different rendering and JavaScript engines, including WebKit based Chrome and Safari, Gecko used by Firefox and Microsoft&rsquo;s Chakra and Trident. From this testing we found missing components that had to be polyfilled, for example the <a href="https://fetch.spec.whatwg.org/">fetch</a> API for making http requests. However, by sticking to the most common HTML tags and CSS properties we encountered few issues.  </p>
<ul>
<li>We ensured all CSS properties we used were fully specified with vendor prefixes to ensure compatibility, for example using -webkit and -moz.</li>
</ul>
</li>
</ul>
<h1 id="operating-overview"><a name="user-content-operating-overview" href="#operating-overview" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Operating Overview</h1>
<h2 id="running-the-site"><a name="user-content-running-the-site" href="#running-the-site" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Running the Site</h2>
<ul>
<li><code>cd</code> to the festerr root level folder. </li>
<li>run <code>npm install</code> to install the necessary NodeJS packages.</li>
<li>run <code>node server.js</code>.You should see the output <code>Festerr app listening at https://0.0.0.0:3000</code> or <code>Festerr app listening at http://0.0.0.0:3000</code> on the prompt. </li>
<li>Navigate to <code>https://localhost:3000</code> or <code>http://localhost:3000</code> (depending on whether the server is running HTTPS or not) and you should see the page. </li>
<li>As we are using HTTPS protocol with a self signed certificate, some browsers may show a dialog warning you when you navigate to the page. Simply click through this to view the site.</li>
<li>We have provided a free Spotify account to use for testing. This account has several playlists containing many unique artists, allowing us to see the impact of the Festerr score. The account details are: <ul>
<li>username: UOBFesterrTest </li>
<li>password UOBFesterrPassword </li>
</ul>
</li>
</ul>
<h2 id="user-guide"><a name="user-content-user-guide" href="#user-guide" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>User Guide</h2>
<ul>
<li>
<p>The main page shows a list of festivals, ranked by Skiddle as most popular to least. We limit this to 20 events, but plan to add pagination or &lsquo;infinite scrolling&rsquo; to show more. </p>
</li>
<li>
<p>Each event is shown with the name, the Festerr score and a thumbnail image of the festival. Hovering over an event shows more detail.</p>
</li>
<li>
<p>The toolbar allows users to search for events or artists. These are autosuggested as &lsquo;chips&rsquo; by our search engine, which uses a version of the hamming distance (Levenshtein Distance) to give intelligent suggestions on user input, updated as they type. Events with matching names or artists are then shown.  </p>
</li>
<li>
<p>The toolbar contains a button allowing to user to login using an existing Spotify account. This takes them to a Spotify login page, allowing them to securely log in to Spotify servers without Festerr having to store usernames or passwords. When they agree to allow Festerr access to their playlist data, they are taken back to the front page. Festivals are then ranked by our Festerr ranking score (explained above).  </p>
</li>
<li>
<p>Selecting an event brings you to the event details page. This page gives much more detail about an event such as when and where the event is happening.    * This page also displays all artists appearing in the event, highlighting those that are found in the user&rsquo;s Spotify collection. </p>
<ul>
<li>We have included a link that allows users to go to the festival&rsquo;s site to buy tickets. </li>
<li>We also shows a background image for the event which we dynamically add from our google search integration.</li>
<li>User&rsquo;s can &lsquo;favourite&rsquo; the event to look at later by clicking the large heart button on the top right of the event card. When favorutied the heart is filled in, otherwise it is outlined. This button is coloured dynamcially with the main colours of the festival (retrieved from the festival header image)     </li>
<li>The first time the <code>/event/</code> endpoint it called on the server, it will call the Skiddle API and retrieve the necessary event list, and then will cache it so as to reduce unnecessary calls to the external service.</li>
</ul>
</li>
<li>
<p>The Favorites tab shows a logged in user a list of events they have &lsquo;Favourited&rsquo; in the past. Clicking on one of these cards brings the user to event details page. If the user is not logged in they are instead prompted to log in with Spotify.  </p>
</li>
</ul>
<h2 id="deployed-site-on-heroku"><a name="user-content-deployed-site-on-heroku" href="#deployed-site-on-heroku" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Deployed Site on Heroku</h2>
<p>Festerr is also deployed on the Heroku hosting service. This reflects the current state of the master branch of the project. Navigate to <a href="https://festerr.herokuapp.com">https://festerr.herokuapp.com</a> to view the site. </p></article></body></html>